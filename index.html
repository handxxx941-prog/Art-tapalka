<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Valgar ART Token</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { margin:0; background:#000; color:white; text-align:center; overflow:hidden; }
    .balance { font-size:42px; font-weight:bold; margin:30px 0; color:#ffd700; text-shadow:0 0 30px #ff5500; }
    #tapArea { width:100%; height:70vh; background:url('valgar.jpg') center/contain no-repeat; background-size:contain; touch-action:manipulation; }
    .plus { position:absolute; font-size:80px; font-weight:bold; color:#ffd700; text-shadow:0 0 30px #ff0000; pointer-events:none; z-index:999; left:50%; top:50%; transform:translate(-50%,-50%); animation:up 1s forwards; }
    @keyframes up { to { transform:translate(-50%,-300px) scale(2); opacity:0; } }
    button { background:#ffd700; color:#000; padding:18px 36px; border-radius:50px; font-size:20px; margin:10px; font-weight:bold; }
    .energy-bar { height:28px; background:#111; border-radius:14px; overflow:hidden; margin:20px; border:3px solid #ffd700; }
    .energy-fill { height:100%; background:linear-gradient(90deg,#ff0000,#ffd700); transition:width 0.3s; }
  </style>
</head>
<body>
  <div class="balance" id="balance">0 ART</div>
  
  <div id="tapArea"></div>
  
  <div style="margin:20px 0">
    <div>–≠–Ω–µ—Ä–≥–∏—è <span id="energyText">5000</span>/5000</div>
    <div class="energy-bar"><div class="energy-fill" id="energyFill"></div></div>
  </div>
  
  <button onclick="testAdd()">–¢–ï–°–¢ +1000 ART</button>
  <button id="dailyCombo">Daily Combo (+10M)</button>

  <script>
    const tg = window.Telegram.WebApp; tg.ready(); tg.expand();
    const userId = tg.initDataUnsafe.user?.id || 'test';
    let data = JSON.parse(localStorage.getItem('valgar_art_' + userId)) || {points: 0, energy: 5000};

    function save() {
      localStorage.setItem('valgar_art_' + userId, JSON.stringify(data));
      document.getElementById('balance').textContent = data.points.toLocaleString('ru-RU') + ' ART';
      document.getElementById('energyText').textContent = data.energy + '/5000';
      document.getElementById('energyFill').style.width = (data.energy/5000*100) + '%';
    }
    save();

    // –¢–ï–°–¢–û–í–ê–Ø –ö–ù–û–ü–ö–ê ‚Äî –Ω–∞–∂–º–∏ –µ—ë, –µ—Å–ª–∏ —Ç–∞–ø –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (—á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–∞–ª–∞–Ω—Å –≤–æ–æ–±—â–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
    function testAdd() {
      data.points += 1000;
      save();
      alert('–¢–µ—Å—Ç –ø—Ä–æ—à—ë–ª ‚Äî –±–∞–ª–∞–Ω—Å —Ä–∞—Å—Ç—ë—Ç!');
    }

    // –ì–ª–∞–≤–Ω–æ–µ ‚Äî —Å—É–ø–µ—Ä–Ω–∞–¥—ë–∂–Ω—ã–π —Ç–∞–ø (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –Ω–∞ —Å–∞–º–æ–º –≥–ª—é—á–Ω–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ)
    const tapArea = document.getElementById('tapArea');
    tapArea.addEventListener('click', tap);
    tapArea.addEventListener('touchstart', tap);
    tapArea.addEventListener('pointerdown', tap);

    function tap(e) {
      if (e) e.preventDefault();
      if (data.energy <= 0) return tg.HapticFeedback.notificationOccurred('error');

      data.energy -= 1;
      data.points += 1;
      save();

      // –û–≥—Ä–æ–º–Ω—ã–π +1 ART –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç–∫—Ä–∞–Ω–∞
      let plus = document.createElement('div');
      plus.textContent = '+1 ART';
      plus.classList.add('plus');
      document.body.appendChild(plus);
      setTimeout(() => plus.remove(), 1000);

      tg.HapticFeedback.impactOccurred('heavy');
    }

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
    setInterval(() => {
      if (data.energy < 5000) {
        data.energy += 1;
        save();
      }
    }, 800); // —á—É—Ç—å –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è —Ç–µ—Å—Ç–∞

    // Daily Combo
    document.getElementById('dailyCombo').onclick = () => {
      const today = Math.floor(Date.now()/86400000);
      if (!localStorage.getItem('daily_' + today)) {
        data.points += 10000000;
        localStorage.setItem('daily_' + today, 'true');
        alert('–í–∞–ª–≥–∞—Ä –¥–∞–ª +10.000.000 ART üî•');
        save();
      } else alert('–£–∂–µ –∑–∞–±—Ä–∞–ª —Å–µ–≥–æ–¥–Ω—è!');
    };
  </script>
</body>
</html>
