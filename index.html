<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Valgar ART Token</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/@tonconnect/ui@2.0.0/dist/tonconnect-ui.min.js"></script>
  <style>
    body { margin:0; background: #000; color: white; font-family: Arial; text-align: center; overflow: hidden; }
    .balance { font-size: 40px; font-weight: bold; margin: 30px 0; color: #ffd700; text-shadow: 0 0 30px #ff5500; }
    #valgar { width: 90%; max-width: 420px; margin: 20px auto; border-radius: 20px; box-shadow: 0 0 100px #ff5500; user-select: none; pointer-events: auto; }
    .striking { animation: strike 0.7s ease-in-out; }
    @keyframes strike { 0%{transform:rotate(0)} 25%{transform:rotate(32deg) scale(1.15)} 100%{transform:rotate(0)} }
    .coin { position: absolute; font-size: 48px; pointer-events: none; z-index: 999; animation: fly 1.4s ease-out forwards; }
    @keyframes fly { to { transform: translate(var(--dx), var(--dy)) rotate(var(--rot)); opacity: 0; } }
    .plus { position: absolute; font-size: 64px; font-weight: bold; color: #ffd700; text-shadow: 0 0 30px #ff0000; pointer-events: none; z-index: 999; animation: up 1.2s forwards; }
    @keyframes up { to { transform: translateY(-250px) scale(1.5); opacity: 0; } }
    button { background: linear-gradient(#ff5500, #ffd700); color: #000; padding: 18px 36px; border-radius: 50px; font-size: 20px; margin: 10px; font-weight: bold; border: none; }
    .energy-bar { height: 28px; background: #111; border-radius: 14px; overflow: hidden; margin: 20px 0; border: 3px solid #ffd700; }
    .energy-fill { height: 100%; background: linear-gradient(90deg, #ff0000, #ffd700); transition: width 0.3s; }
  </style>
</head>
<body>
  <div class="balance" id="balance">0 ART</div>
  <img src="valgar.jpg" id="valgar" alt="Valgar">
  <div style="margin:20px 0">
    <div>–≠–Ω–µ—Ä–≥–∏—è <span id="energyText">3000</span>/3000</div>
    <div class="energy-bar"><div class="energy-fill" id="energyFill"></div></div>
  </div>
  <button id="connectWallet">–ü–æ–¥–∫–ª—é—á–∏—Ç—å TON</button>
  <button id="claimBtn">Claim (—Å–∫–æ—Ä–æ TGE)</button>
  <button id="dailyCombo">Daily Combo (+10M)</button>

  <script>
    const tg = window.Telegram.WebApp; tg.ready(); tg.expand();
    const userId = tg.initDataUnsafe.user?.id || 'test';
    let data = JSON.parse(localStorage.getItem('valgar_' + userId)) || {points: 0, energy: 3000, lastDaily: 0};

    function save() {
      localStorage.setItem('valgar_' + userId, JSON.stringify(data));
      document.getElementById('balance').textContent = Math.floor(data.points).toLocaleString('ru-RU') + ' ART';
      document.getElementById('energyText').textContent = data.energy + '/3000';
      document.getElementById('energyFill').style.width = (data.energy/3000*100) + '%';
    }
    save();

    const valgar = document.getElementById('valgar');
    ['touchstart', 'click', 'pointerdown'].forEach(ev => {
      valgar.addEventListener(ev, function(e) {
        e.preventDefault();
        if (data.energy <= 0) {
          tg.HapticFeedback.notificationOccurred('error');
          return;
        }
        data.energy -= 1;
        data.points += 1;
        save();

        // –£–¥–∞—Ä –í–∞–ª–≥–∞—Ä–∞
        valgar.classList.add('striking');
        setTimeout(() => valgar.classList.remove('striking'), 700);

        const rect = valgar.getBoundingClientRect();
        const x = e.touches ? e.touches[0].clientX : e.clientX;
        const y = e.touches ? e.touches[0].clientY : e.clientY;

        // +1 ART –æ–≥—Ä–æ–º–Ω—ã–π
        let plus = document.createElement('div');
        plus.textContent = '+1 ART';
        plus.classList.add('plus');
        plus.style.left = (x - 80) + 'px';
        plus.style.top = (y - 100) + 'px';
        document.body.appendChild(plus);
        setTimeout(() => plus.remove(), 1200);

        // 20 –º–æ–Ω–µ—Ç–æ–∫ —Å –±–µ—à–µ–Ω—ã–º —Å–ø–∏–Ω–æ–º
        for(let i = 0; i < 20; i++) {
          let c = document.createElement('div');
          c.textContent = 'ü™ô';
          c.classList.add('coin');
          let dx = (Math.random() - 0.5) * 500;
          let dy = -200 - Math.random() * 400;
          let rot = Math.random() * 1440 - 720;
          c.style.setProperty('--dx', dx + 'px');
          c.style.setProperty('--dy', dy + 'px');
          c.style.setProperty('--rot', rot + 'deg');
          c.style.left = (x - 30) + 'px';
          c.style.top = (y - 30) + 'px';
          document.body.appendChild(c);
          setTimeout(() => c.remove(), 1400);
        }

        tg.HapticFeedback.impactOccurred('heavy');
      });
    });

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
    setInterval(() => {
      if (data.energy < 3000) {
        data.energy += 1;
        save();
      }
    }, 1000);

    // Daily Combo
    document.getElementById('dailyCombo').onclick = () => {
      const today = Math.floor(Date.now()/86400000);
      if (data.lastDaily !== today) {
        data.points += 10000000;
        data.lastDaily = today;
        alert('–í–∞–ª–≥–∞—Ä –¥–∞–ª —Å–∏–ª—É! +10.000.000 ART üî•');
        save();
      } else alert('–£–∂–µ –∑–∞–±—Ä–∞–ª —Å–µ–≥–æ–¥–Ω—è, –≤–æ–∏–Ω!');
    };

    document.getElementById('connectWallet').onclick = () => tonConnectUI.openModal();
    document.getElementById('claimBtn').onclick = () => alert('–¢—ã –≤ —Ñ–µ—Ä–º–∏–Ω–≥–µ! ' + data.points.toLocaleString('ru-RU') + ' ART –±—É–¥–µ—Ç –Ω–∞ TGE');
  </script>
</body>
</html>
